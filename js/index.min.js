"use strict";function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}var playing=!0,timer=function(){return setInterval(function(){var a=document.getElementById("counter"),b=parseInt(a.innerText);a.innerText=b+1},1e3)},interval=timer(),minus=document.getElementById("minus"),plus=document.getElementById("plus"),heart=document.getElementById("heart"),pause=document.getElementById("pause"),commentForm=document.getElementsByTagName("form")[0];minus.addEventListener("click",function(){var a=document.getElementById("counter"),b=parseInt(a.innerText);a.innerText=b-1}),plus.addEventListener("click",function(){var a=document.getElementById("counter"),b=parseInt(a.innerText);a.innerText=b+1}),heart.addEventListener("click",function(){var a=document.getElementById("counter"),b=parseInt(a.innerText),c=document.querySelector(".likes"),d=void 0;if([].concat(_toConsumableArray(c.children)).map(function(a){return parseInt(a.dataset.num)}).includes(b)){d=document.querySelector('[data-num="'+b+'"]');var e=parseInt(d.children[0].innerText);d.innerHTML=b+" has been liked <span>"+(e+1)+"</span> times"}else(d=document.createElement("li")).setAttribute("data-num",b),d.innerHTML=b+" has been liked <span>1</span> time",c.appendChild(d)}),pause.addEventListener("click",function(){playing?(playing=!1,clearInterval(interval),this.innerText="resume"):(playing=!0,interval=timer(),this.innerText="pause"),[].concat(_toConsumableArray(document.getElementsByTagName("button"))).forEach(function(a){"pause"!==a.id&&(a.disabled=!playing)})}),commentForm.addEventListener("submit",function(a){a.preventDefault();var b=this.children[0],c=b.value;b.value="";var d=document.querySelector(".comments"),e=document.createElement("p");e.innerText=c,d.appendChild(e)});
1 contributor
72 lines (68 sloc)  2.3 KB

document.addEventListener('DOMContentLoaded', function(e){
  let sec = 0
  let pause = false
  const counter = document.getElementById('counter')
  function incrementSec(){
    sec++;
    counter.innerHTML = sec
  }
  let cancel = setInterval(incrementSec, 1000)


  function clickHandler(){
    document.addEventListener('click', function(e){
      if (e.target.matches('#minus')){
        sec--;
        counter.innerHTML = sec
      }else if(e.target.matches('#plus')){
        sec++;
        counter.innerHTML = sec
      }else if(e.target.matches('#heart')){
        let ul = document.getElementsByClassName('likes')[0]
        let num = counter.innerText
        let li = document.querySelector(`[data-num="${num}"]`)
        if(li){
          li.dataset.like = parseInt(li.dataset.like) + 1
          li.innerText = `${num} has ${li.dataset.like} like`
        }else{
          let newLi = document.createElement('li')
          newLi.dataset.num = num
          newLi.dataset.like = 1
          newLi.innerText = `${num} has ${newLi.dataset.like} like`
          ul.appendChild(newLi)
        }

      }else if(e.target.matches('#pause')){
        if(pause === false){
          clearInterval(cancel)
          pause = true
          document.getElementById('plus').disabled = true
          document.getElementById('minus').disabled = true
          document.getElementById('heart').disabled = true
          document.getElementById('pause').innerText = 'resume'
        }else{
          cancel = setInterval(incrementSec, 1000)
          pause = false
          document.getElementById('plus').disabled = false
          document.getElementById('minus').disabled = false
          document.getElementById('heart').disabled = false
          document.getElementById('pause').innerText = 'pause'

        }
      }
    })
  }
  function submitHandler(){
    document.addEventListener('submit', function(e){
      if (e.target.matches('#comment-form')){
        let form = e.target
        let val = form.querySelector('#comment-input').value
        console.log(val)
        let comment = document.createElement('div')
        comment.innerText = val
        let div = document.getElementById('list')
        div.appendChild(comment)
        form.reset();
        e.preventDefault();
      }
    })
  }
  clickHandler();
  submitHandler();
})
